# Branch Visualization Benchmark Test File
# Use this file to test performance improvements
#
# HOW TO BENCHMARK:
# 1. Press F1 and run "IC10: Toggle Performance Benchmarking"
# 2. Press Ctrl+Alt+B to enable branch visualization
# 3. Make edits to this file (add/remove branches, type in comments, etc.)
# 4. Press F1 and run "IC10: Show Performance Stats"
# 5. Compare stats before/after optimization

alias battery d0
alias furnace d1
alias sensor d2

# Test 1: Simple forward branches
start:
l r0 battery Charge
brgtz r0 3              # Forward branch test
s furnace On 0
s furnace Setting 0
jr 5                    # Skip ahead

charge_ok:
s furnace On 1
l r1 battery Ratio
mul r2 r1 100
s furnace Setting r2

# Test 2: Backward loop
check_temp:
l r3 sensor Temperature
blt r3 300 2            # Branch forward if cold
s furnace On 0
jr 3                    # Skip heating

heat_up:
s furnace On 1
s furnace Setting 100

# Test 3: Nested branches
safety_check:
l r4 sensor Pressure
brgt r4 10000 4         # Too much pressure
l r5 sensor Temperature
brgt r5 500 2           # Too hot
jr 3                    # All good, continue
shutdown:
s furnace On 0
jr -20                  # Back to start

# Test 4: Multiple branches to same target
continue_operation:
l r6 battery Ratio
blt r6 0.2 5            # Low battery
l r7 furnace Temperature  
brgt r7 1000 3          # Too hot
l r8 furnace Pressure
brgt r8 50000 1         # Too much pressure
jr 2                    # Skip shutdown
s furnace On 0

# Test 5: Long backward loop
main_loop:
yield
jr -35                  # Loop all the way back

# Add more branches here to stress test:
# (Type new branch instructions below)

end:
